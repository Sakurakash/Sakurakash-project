"use strict";(self["webpackChunkmusic163_vue"]=self["webpackChunkmusic163_vue"]||[]).push([[313],{9313:function(t,s,e){e.r(s),e.d(s,{default:function(){return H}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"detail"},[s("sub-header",{attrs:{title:t.playlist.name}}),s("DetailTop",{ref:"top",attrs:{path:t.playlist["coverImgUrl"]}}),s("div",{staticClass:"bottom"},[s("ScrollView",{ref:"scrollView"},[s("DetailBottom",{attrs:{playlist:t.playlist["tracks"]}})],1)],1)],1)},i=[],l=function(){var t=this,s=t._self._c;return s("Header",{staticClass:"header"},[s("div",{staticClass:"header-left",attrs:{slot:"left"},on:{click:function(s){return s.stopPropagation(),t.back.apply(null,arguments)}},slot:"left"}),s("p",{staticClass:"header-title",attrs:{slot:"center"},slot:"center"},[t._v(t._s(t.title))]),s("div",{staticClass:"header-right",attrs:{slot:"right"},slot:"right"})])},r=[],o=e(6657),c={name:"SubHeader",components:{Header:o.Z},props:{title:{type:String,default:"",required:!0}},methods:{back(){window.history.back()}}},n=c,u=e(1001),p=(0,u.Z)(n,l,r,!1,null,"08803702",null),h=p.exports,d=function(){var t=this,s=t._self._c;return s("div",{staticClass:"detail-top"},[s("div",{staticClass:"img-container"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.path,expression:"path"}],attrs:{alt:""}}),s("div",{ref:"mask",staticClass:"mask"})])])},m=[],f={name:"DetailTop",props:{path:{type:String,default:"",required:!0}},methods:{changeMask(t){this.$refs.mask.style.opacity=t}}},y=f,v=(0,u.Z)(y,d,m,!1,null,"4ac223f2",null),g=v.exports,S=function(){var t=this,s=t._self._c;return s("ul",{staticClass:"detail-bottom"},[s("li",{staticClass:"bottom-top",on:{click:t.selectAllMusic}},[s("div",{staticClass:"top-icon"}),s("div",{staticClass:"top-title"},[t._v("播放全部")])]),t._l(t.playlist,(function({al:e,ar:a,id:i,name:l}){return s("li",{key:i,staticClass:"item",on:{click:function(s){return t.selectMusic(i)}}},[s("h3",[t._v(t._s(l))]),s("p",[t._v(t._s(e.name)+" - "+t._s(a[0].name))])])})),s("li",{staticClass:"box"})],2)},k=[],_=e(3822),b={name:"DetailBottom",props:{playlist:{type:Array,default:()=>[],required:!0}},methods:{...(0,_.nv)(["setFullScreen","setMiniPlayer","setSongsDetail"]),selectMusic(t){this.setFullScreen(!0),this.setMiniPlayer(!1),this.setSongsDetail([t])},selectAllMusic(){this.setFullScreen(!0);const t=this.playlist.map((function(t){return t.id}));this.setSongsDetail(t)}},computed:{...(0,_.Se)(["isShowMiniPlayer"])},watch:{isShowMiniPlayer(t){const s=document.querySelector(".detail-bottom>.box");t?s.classList.add("active"):s.classList.remove("active")}}},C=b,w=(0,u.Z)(C,S,k,!1,null,"55386e56",null),$=w.exports,M=e(8737),D=e(8181),x={name:"detail",components:{SubHeader:h,DetailTop:g,DetailBottom:$,ScrollView:M.Z},computed:{...(0,_.Se)(["isShowMiniPlayer"])},watch:{isShowMiniPlayer(){this.$refs.scrollView.refresh()}},data(){return{playlist:{}}},created(){"personalized"===this.$route.params.type?(0,D.$s)({id:this.$route.params.id}).then((t=>{this.playlist=t.playlist})).catch((t=>{console.log(t)})):"album"===this.$route.params.type?(0,D.eK)({id:this.$route.params.id}).then((t=>{this.playlist={name:t.album.name,coverImgUrl:t.album.picUrl,tracks:t.songs}})).catch((t=>{console.log(t)})):"singer"===this.$route.params.type&&(0,D.o7)({id:this.$route.params.id}).then((({artist:t,hotSongs:s})=>{this.playlist={name:t.name,coverImgUrl:t.picUrl,tracks:s}})).catch((t=>{console.log(t)}))},mounted(){const t=this.$refs.top.$el;if(void 0!==t){const s=t.offsetHeight;this.$refs.scrollView.scrolling((e=>{if(e<0){const t=Math.abs(e)/s;this.$refs.top.changeMask(t)}else{const a=1+e/s;t.style.transform=`scale(${a})`}}))}}},P=x,Z=(0,u.Z)(P,a,i,!1,null,"2814f4d2",null),H=Z.exports}}]);
//# sourceMappingURL=313.0c06b2c6.js.map