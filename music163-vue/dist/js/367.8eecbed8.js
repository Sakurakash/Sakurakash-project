"use strict";(self["webpackChunkmusic163_vue"]=self["webpackChunkmusic163_vue"]||[]).push([[367],{1367:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"singer"},[e("ScrollView",{ref:"scrollView"},[e("ul",{staticClass:"list-wrapper"},t._l(t.list,(function(s,i){return e("li",{key:i,ref:"group",refInFor:!0,staticClass:"list-group"},[e("h2",{staticClass:"group-title"},[t._v(t._s(t.keys[i]))]),e("ul",t._l(t.list[i],(function({id:s,img1v1Url:i,name:r}){return e("li",{key:s,staticClass:"group-item",on:{click:function(e){return e.stopPropagation(),t.switchSinger(s)}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i,expression:"img1v1Url"}],attrs:{alt:""}}),e("p",[t._v(t._s(r))])])})),0)])})),0)]),e("ul",{staticClass:"list-keys"},t._l(t.keys,(function(s,i){return e("li",{key:s,class:{active:t.currentIndex===i},attrs:{"data-index":i},on:{touchstart:function(e){return e.stopPropagation(),e.preventDefault(),t.touchstart.apply(null,arguments)},touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.touchmove.apply(null,arguments)}}},[t._v(t._s(s))])})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:""!==t.fixTitle,expression:"fixTitle !== ''"}],ref:"fixTitle",staticClass:"fix-title"},[t._v(t._s(t.fixTitle))]),e("transition",[e("router-view")],1)],1)},r=[],n=(s(7658),s(8181)),l=s(8737),o={name:"singer",components:{ScrollView:l.Z},data(){return{keys:[],list:[],groupsTop:[],currentIndex:0,beginOffsetY:0,moveOffsetY:0,scrollY:0}},computed:{fixTitle(){return this.scrollY>=0?"":this.keys[this.currentIndex]}},methods:{_keyDown(t){this.currentIndex=t;const e=this.groupsTop[t];this.$refs.scrollView.scrollTo(0,-e)},touchstart(t){const e=parseInt(t.target.dataset.index);this._keyDown(e),this.beginOffsetY=t.touches[0].pageY},touchmove(t){this.moveOffsetY=t.touches[0].pageY;const e=(this.moveOffsetY-this.beginOffsetY)/t.target.offsetHeight;let s=parseInt(t.target.dataset.index)+Math.floor(e);s<0?s=0:s>this.keys.length-1&&(s=this.keys.length-1),this._keyDown(s)},switchSinger(t){this.$router.push(`/singer/detail/${t}/singer`)}},created(){(0,n.Y$)().then((t=>{this.keys=t.keys,this.list=t.list})).catch((t=>{console.log(t)}))},mounted(){this.$refs.scrollView.scrolling((t=>{if(this.scrollY=t,t>=0)this.currentIndex=0;else{for(let e=0;e<this.groupsTop.length-1;e++){const s=this.groupsTop[e],i=this.groupsTop[e+1];if(-t>=s&&-t<=i){this.currentIndex=e;const s=i+t;let r=0;if(r=s>=0&&s<=this.fixTitleHeight?s-this.fixTitleHeight:0,r===this.fixTitleOffsetY)return;return this.fixTitleOffsetY=r,void(this.$refs.fixTitle.style.transform=`translateY(${r}px)`)}}this.currentIndex=this.groupsTop.length-1}}))},watch:{list(){this.$nextTick((()=>{this.$refs.group.forEach((t=>{this.groupsTop.push(t.offsetTop)}))}))},fixTitle(){this.$nextTick((()=>{this.fixTitleHeight=this.$refs.fixTitle.offsetHeight}))}}},a=o,u=s(1001),h=(0,u.Z)(a,i,r,!1,null,"e683a788",null),c=h.exports}}]);
//# sourceMappingURL=367.8eecbed8.js.map